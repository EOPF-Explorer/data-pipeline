{
    "_comment": "Example payload for GeoZarr conversion pipeline",
    "_usage": "Copy to workflows/payload.json and edit with your data",
    "source_url": "https://stac.core.eopf.eodc.eu/collections/sentinel-2-l2a/items/S2B_MSIL2A_20250518T112119_N0511_R037_T29RLL_20250518T140519",
    "_source_url_note": "STAC item URL from EODC. Pipeline will extract zarr URL from assets. Can also be direct zarr URL.",
    "item_id": "S2B_MSIL2A_20250518_T29RLL",
    "_item_id_note": "Unique identifier for STAC item. Format: <satellite>_<product>_<date>_<tile>. Use underscores, not dots. Optional if source is STAC item (will be derived).",
    "collection": "sentinel-2-l2a-dp-test",
    "_collection_note": "Target STAC collection name for registration. Use sentinel-2-l2a-dp-test for testing. MUST use hyphens, not underscores.",
    "groups": [
        "/measurements/reflectance/r10m",
        "/measurements/reflectance/r20m",
        "/measurements/reflectance/r60m"
    ],
    "_groups_note": "Zarr groups to convert. Default: all resolution groups. Can specify single group for faster conversion.",
    "spatial_chunk": 4096,
    "_spatial_chunk_note": "Spatial chunk size for encoding (default: 4096). Larger = better compression, slower write.",
    "tile_width": 256,
    "_tile_width_note": "Tile width for TMS compatibility (default: 256). Must be power of 2.",
    "crs_groups": [
        "/conditions/geometry"
    ],
    "_crs_groups_note": "Groups needing CRS information added (optional). Useful for geometry/mask layers.",
    "min_dimension": 256,
    "_min_dimension_note": "Minimum dimension for overview levels (default: 256). Controls pyramid depth.",
    "enable_sharding": false,
    "_enable_sharding_note": "Enable zarr v3 sharding for spatial dimensions (default: false). Experimental.",
    "_output_paths": {
        "geozarr": "Automatically set to: s3://bucket/path/{collection}/{item_id}.zarr",
        "stac_item": "Automatically set to: {STAC_API_URL}/collections/{collection}/items/{item_id}",
        "map_viewer": "Automatically generated: {RASTER_API_URL}/viewer?url=<stac_item_url>"
    },
    "_workflow_steps": [
        "1. Resolve: Extract zarr URL from STAC item (if needed)",
        "2. Convert: EOPF Zarr â†’ GeoZarr with proper CRS",
        "3. Register: Create STAC item with band assets",
        "4. Augment: Add TiTiler visualization links"
    ],
    "_cli_flags_reference": {
        "groups": "--groups /path1 /path2",
        "spatial_chunk": "--spatial-chunk 4096",
        "tile_width": "--tile-width 256",
        "min_dimension": "--min-dimension 256",
        "crs_groups": "--crs-groups /conditions/geometry",
        "gcp_group": "--gcp-group /conditions/gcp (Sentinel-1 only)",
        "enable_sharding": "--enable-sharding",
        "max_retries": "--max-retries 3",
        "dask_cluster": "--dask-cluster (for parallel processing)"
    }
}
